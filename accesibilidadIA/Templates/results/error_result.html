{% extends 'base.html' %}

{% load static %}

{% block title %}
Resultados > Resultados del análisis > Errores detectados
{% endblock %}

{% block header %}
<div class="title-container">
    <h1>Resultados</h1>
</div>
{% endblock %}

{% block content %}
    <div class="container mt-5">
        <h2 class="page-subtitle my-4">Resultados > Mi Aplicación > Error</h2>
        <div class="card border mb-3 p-3">
            <!-- Cabecera del Modal -->
            <div class="card-header">
                <h4 class="modal-title">Corrección de Código</h4>
            </div>

            <!-- Cuerpo del Modal -->
            <div class="card-body">
                <h5>Código Original:</h5>
                <div class="code-container mb-3 p-3 bg-light border rounded">
                    <code>{{original_code}}</code>
                </div>

                <h5>Solución Propuesta:</h5>
                <div class="code-container mb-3 p-3 bg-light border rounded">
                    <code>{{fixed_code}}</code>
                </div>

                <h5>Descripción del error:</h5>
                <div class="code-container mb-3 p-3 bg-light border rounded">
                    <code>{{detected_error}}</code>
                </div>
            </div>

            <!-- Pie de página del Modal -->
            <div class="card-footer d-flex justify-content-end">
                <button type="button" class="btn btn-success me-2" onclick="mergeLine('{{analysis_id}}', '{{ error_name }}')" id="acceptCorrection">
                    Aceptar
                </button>
                <button type="button" class="btn btn-danger" onclick="backToResults()" id="rejectCorrection">
                    Rechazar
                </button>
            </div>
        </div>
        <div id="loading-modal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="loading-text">
            <div class="modal-content">
                <p id="loading-text">
                    Mergeando linea de código... Por favor, aguarde un momento. Este proceso puede tardar varios minutos.
                </p>
            </div>
        </div>
    </div>
{% endblock %}